apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization
resources:
- ../../../../namespaces/mi/mi-developer-rbac.yaml
- ../../../../namespaces/mi/mi-sftp-server
- ../../../../namespaces/mi/mi-data-extractor/mi-data-extractor-identity.yaml
- ../../../../namespaces/mi/mi-data-extractor/mi-data-extractor-identity-binding.yaml
- ../../../../namespaces/mi/mi-extraction-service/mi-extraction-service-identity.yaml
- ../../../../namespaces/mi/mi-extraction-service/mi-extraction-service-identity-binding.yaml
- ../../../../namespaces/mi/mi-house-keeping-service/mi-house-keeping-service-identity.yaml
- ../../../../namespaces/mi/mi-house-keeping-service/mi-house-keeping-service-identity-binding.yaml
- ../../../../namespaces/mi/mi-integration-service/mi-integration-service-identity.yaml
- ../../../../namespaces/mi/mi-integration-service/mi-integration-service-identity-binding.yaml
- ../../../../namespaces/mi/mi-staging-service/mi-staging-service-identity.yaml
- ../../../../namespaces/mi/mi-staging-service/mi-staging-service-identity-binding.yaml

patches:
- target:
    group: aadpodidentity.k8s.io
    version: v1
    kind: AzureIdentity
    name: data-extractor-job
  path: mi-data-extractor-identity-patch.yaml
- target:
    group: aadpodidentity.k8s.io
    version: v1
    kind: AzureIdentity
    name: mi-extraction-service
  path: mi-extraction-service-identity-patch.yaml
- target:
    group: aadpodidentity.k8s.io
    version: v1
    kind: AzureIdentity
    name: mi-house-keeping-service
  path: mi-house-keeping-service-identity-patch.yaml
- target:
    group: aadpodidentity.k8s.io
    version: v1
    kind: AzureIdentity
    name: mi-integration-service
  path: mi-integration-service-identity-patch.yaml
- target:
    group: aadpodidentity.k8s.io
    version: v1
    kind: AzureIdentity
    name: mi-staging-service
  path: mi-staging-service-identity-patch.yaml
